# Проектная работа "Веб-ларек" 

https://github.com/DaryaSave/web-larek-frontend.git  

 
## Краткое описание 

Веб-приложение интернет-магазина с корзиной, оформлением заказа и взаимодействием с API.   

Стек: TypeScript, HTML, SCSS, Webpack. 

 
Структура проекта: 

- src/ — исходные файлы проекта 
- src/components/ — папка с JS компонентами 
- src/components/base/ — папка с базовым кодом 


Важные файлы: 

- src/pages/index.html — HTML-файл главной страницы 
- src/types/index.ts — файл с типами 
- src/index.ts — точка входа приложения 
- src/scss/styles.scss — корневой файл стилей 
- src/utils/constants.ts — файл с константами 
- src/utils/utils.ts — файл с утилитами 
 

## Установка и запуск 

Для установки и запуска проекта необходимо выполнить команды 

``` 
npm install 

npm run start 

``` 

или 

``` 
yarn 

yarn start 

``` 
## Сборка 

``` 
npm run build 

``` 
или 

``` 
yarn build 

```

## Архитектура проекта 

### Основные части 

**Типы данных (types/)** — описание структуры данных для товаров, корзины, заказов, API и событий. 

**Базовые классы (components/base/)** — инфраструктурные классы: EventEmitter (событийная шина), Api (клиент для запросов к серверу). 

**Компоненты интерфейса (components/)** — визуальные и логические компоненты (карточки товаров, корзина, формы, модальные окна и т.д.). 

**Утилиты (utils/)** — вспомогательные функции для работы с DOM, шаблонами и данными. 


### Взаимодействие частей 
- Взаимодействие между компонентами реализовано через события (паттерн "Наблюдатель", EventEmitter). 
- Запросы к серверу изолированы в классе Api. 
- Все DOM-элементы, с которыми работают компоненты, кэшируются в свойствах для повышения производительности. 
- Повторяющийся код вынесен в утилиты. 


### Типы данных
- `IProductItem` - Интерфейс, описывающий структуру данных товара. Включает в себя:
id — идентификатор товара.
title — название товара.
description — описание товара.
price — стоимость товара.
image — URL изображения товара.
category — категория товара.

- `ICartItem` - Интерфейс для элемента корзины. Включает в себя:
product — объект товара типа IProduct.
quantity — количество единиц данного товара в корзине.

- `IBasket` - Интерфейс описывает состояние корзины. Содержит:
items — массив товаров типа ICartItem, добавленных в корзину.
selected — булевое значение, отображающее выбор состояния корзины.
total — общая сумма стоимости всех товаров в корзине.

- `IOrderForm` - Интерфейс для формы оформления заказа. Включает в себя:
payment — выбранный способ оплаты.
address — адрес доставки.
email — электронная почта клиента.
phone — номер телефона клиента.

- `IOrder` - Типизирует объект заказа. Содержит:
items — массив элементов типа ICartItem, представляющих товары в заказе.
total — общая стоимость заказа.

- `IOrderResult` - Интерфейс для результата оформления заказа, получаемого от API. Включает в себя:
id — идентификатор оформленного заказа.
total — общая сумма списания за заказ.

- `IProductAPI` - Интерфейс для API-клиента, работающего с товарами и заказами. Включает методы:
getCardList() — получает список товаров, возвращает Promise с массивом IProduct.
orderCards(order: IOrder) — оформляет заказ, возвращает Promise с результатом типа IOrderResult.

- `ICard` - Интерфейс для описания данных карточки товара для отображения в интерфейсе. Включает в себя:
id — идентификатор товара.
title — название товара.
price — стоимость товара.
image — URL изображения товара.
category — категория товара.
description — описание товара.

- `IFormState` - Интерфейс, описывающий состояние формы. Содержит:
valid — флаг валидности формы.
errors — массив строк с ошибками валидации.

- `IOrderFormState` - Интерфейс, расширяющий IFormState для формы заказа. Включает в себя:
payment — выбранный способ оплаты.  
address — адрес доставки.

- `IContactsFormState` - Интерфейс, расширяющий IFormState для формы ввода контактной информации. Содержит:
email — электронная почта клиента.
phone — номер телефона клиента.

- `EventTypes` - Перечисление событий для системы событий. Содержит:
ADD_TO_BASKET — событие добавления товара в корзину.
REMOVE_FROM_BASKET — событие удаления товара из корзины.
ORDER_PLACED — событие успешного оформления заказа.

- `IEvent` - Обобщённый интерфейс для описания событий. Содержит:
type — тип события из перечисления EventTypes.
data — данные события произвольного типа (по умолчанию unknown).


## Описание базовых классов и интерфейсов 
*`Базовый код`*
### Класс `EventEmitter` (паттерн "Наблюдатель") 
`constructor()`- Параметры: нет.
**Назначение:** 
Брокер событий для организации слабосвязанного взаимодействия между частями приложения. 

**Конструктор:** 
Не принимает параметров. 

**Свойства:** 
`_events: Map<EventName, Set<Subscriber>>` — карта событий и их подписчиков. 

**Методы:** 
- `on<T>(event: EventName, callback: (data: T) => void): void` — Подписывает callback на событие event с данными типа T. 
- `off(event: EventName, callback: Subscriber): void` — Отписывает callback от события event. 
- `emit<T>(event: EventName, data?: T): void` — Инициирует событие event с передачей данных типа T. 
- `onAll(callback: (event: EmitterEvent) => void): void` — подписка на все события. 
- `offAll(): void` — сбросить все подписки. 
- `trigger<T>(event: EventName, context?: Partial<T>): (data: T) => void` — возвращает callback-триггер для event с частичным контекстом типа T. 


*`Компоненты модели данных (бизнес-логика)`*

### Класс `Api` 
`constructor(baseUrl: string, options?: RequestInit)` 
- `baseUrl: string` — базовый URL API. 
- `options?: RequestInit` — дополнительные опции запроса. 
**Назначение:** 
Используется для взаимодействия с внешними системами, с возможностью отправлять GET и POST-запросы. 

**Свойства:** 
- `baseUrl: string` — базовый URL. 
- `options: RequestInit` — опции fetch-запросов. 

**Методы:** 
- `get(uri: string): Promise<object>` — выполняет GET-запрос по относительному URI. 
- `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`— POST-запрос (по умолчанию), с возможностью указания метода PUT или DELETE через параметр method. 
- `delete(uri: string): Promise<object>` - удаляет ресурс на сервере по указанному адресу, возвращает ответ сервера или ошибку.
- `getProductList(): Promise<IProductItem[]>` - запрашивает список товаров с API, формирует корректные данные, добавляет полный путь к изображению,проверяет, что данные получены в правильном формате.
- `handleResponse(response: Response): Promise<object>` — обрабатывает HTTP-ответ, возвращает JSON или ошибку. 
- `isValidProduct(item: unknown): item is IProductItem` - Проверяет, соответствует ли объект данным о товаре (IProductItem), используется, чтобы отсеять некорректные данные перед сохранением. 
 

### Класс `AppData`
`constructor(api: Api, userInfo: UserInfo)`
- `api: Api` — экземпляр клиента для запросов к серверу.
- `userInfo: UserInfo` — менеджер данных пользователя.
**Назначение:** 
Отвечает за работу с моделью приложения: хранение и обновление состояния данных (пользователь, список товаров, корзина), а также координацию между API и визуальными компонентами.

**Свойства:**
- `_api` -экземпляр класса Api для работы с сервером.
- `_userInfo` - экземпляр класса UserInfo, хранящий данные пользователя.
- `_items` - массив товаров (карточек), полученных с сервера.
- `_cart` - массив товаров, добавленных в корзину.

**Методы:**
- `constructor(api, userInfo)` - Инициализирует зависимости: экземпляр API для работы с сервером и данные пользователя.
Создаёт локальные свойства для хранения списка товаров и содержимого корзины.
Параметры:
api — экземпляр класса для работы с сервером.
userInfo — объект с информацией о пользователе.
- `initApp(): Promise<void>` - Загружает данные о пользователе и список товаров с сервера. После успешной загрузки сохраняет данные в локальные свойства. В случае ошибки выводит сообщение в консоль. Возвращает: Promise<void>.
- `getItems(): IProductItem[]` - Возвращает текущий список всех товаров, сохранённый в приложении. Возвращает: IProductItem[].
- `addItem(data IProductItem): Promise<IProductItem>` - Добавляет новый товар в список:
Отправляет данные на сервер, после успешного ответа добавляет товар в начало локального списка товаров. Возвращает: Promise<IProductItem> с добавлённым элементом.
- `deleteItem(itemId: string): Promise<void>` - Удаляет товар из списка и с сервера:
Отправляет запрос на удаление по ID, после успешного ответа удаляет товар из локального списка. Возвращает: Promise<void>.
- `addToCart(item: IProductItem): void)` - Добавляет товар в корзину, если он ещё не был добавлен:
Проверяет наличие товара в корзине по ID, если товара нет — добавляет его в массив корзины.
- `removeFromCart(itemId: string): void)` - Удаляет товар из корзины по ID:
Фильтрует корзину, исключая товар с указанным идентификатором.
- `getCart(): IProductItem[]` - Возвращает текущее содержимое корзины.
- `clearCart(): void` - Полностью очищает корзину, сбрасывая массив до пустого состояния.


### Класс `AppState`
`constructor(initialState?: {` - initialState: объект с опциями начального состояния (корзина, каталог, заказ, ошибки).
  basket?: IProductItem[];
  catalog?: IProductItem[];
  order?: IOrder;
  formErrors?: FormErrors;
`})`
**Назначение:** Хранит глобальное состояние приложения (данные каталога, корзины, заказа,управляет их изменениями, выполняет расчёты, проверяет корректность вводимых пользователем данных.)

**Свойства:**
- `basket: IProductItem[]` - список товаров в корзине.
- `catalog: IProductItem[]` - данные о товарах.
- `order: IOrder` - данные о заказе.
- `formErrors: FormErrors` - ошибки валидации.
- `orderForm: IOrderForm` - Хранит текущие данные формы оформления заказа, включая: выбранный способ оплаты, адрес доставки,  электронная почта и телефон (дублируются в contactForm).
- `contactForm: IContactsFormState` - Управляет состоянием контактной информации и валидации: флаг корректности данных, список ошибок валидации, электронная почта,  телефонный номер.

**Методы:**
- `getTotal(): number` - Возвращает сумму цен товаров в basket. Вызывается при обновлении корзины или перед отображением итога.
- `setCatalog(products: IProductItem[]): void` - Устанавливает новый массив catalog для отображения товаров.
- `addToBasket(product: IProductItem): void` - Добавляет товар в basket, если его нет, и пересчитывает сумму.
- `removeFromBasket(productId: string): void` - Удаляет товар из basket по productId и обновляет сумму.
- `clearBasket(): void` - очищает корзину и сбрасывает сумму.
- `clearOrder(): void` - очищает данные текущего заказа.
- `checkProduct(productId: string): boolean` - проверяет наличие товара в корзине, возвращает true/false.
- `setOrderField(field: keyof IOrderForm, value: string): void` - заполняет данные формы в заказ.
- `validateOrder(): boolean` - Проверяет заполненность и корректность полей заказа (payment, address), обновляет formErrors, возвращает true, если ошибок нет.
- `setContactField(field: 'email' | 'phone', value: string): void` - Устанавливает контактные данные (email или phone) в order.
- `validateContact(): boolean` - Проверяет формат email и phone, обновляет formErrors, возвращает true, если оба поля валидны.
- `private updateOrder(): void` - Синхронизирует данные корзины с объектом заказа. Автоматически вызывается при изменении состава корзины.

### Класс `UserInfo`
`constructor(api: Api)`
api: Api — клиент API для запросов к /user.
**Назначение:** Менеджер данных пользователя, который загружает и хранит информацию о текущем пользователе. Позволяет получать и обновлять данные пользователя с сервера.

**Свойства:**
- `_api: Api` — клиент API, который используется для запросов к серверу.
- `_data: IUser | nul`l — локально сохранённые данные пользователя. Если данные ещё не загружены, хранит null.

**Методы:**
- `fetchUser(): Promise<IUser>` — запрашивает данные пользователя с сервера, сохраняет их локально и возвращает.
- `getUser(): IUser | null` — возвращает локально сохранённые данные пользователя. Если данные не загружены, возвращает null.
- `updateUser(updates: Partial<IUser>): Promise<IUser>` — отправляет обновление данных пользователя на сервер, сохраняет обновлённые данные локально.

*`Компоненты представления`*

### `Component<T>`
`constructor(element: T)` - корневой DOM-элемент компонента (например, HTMLElement, HTMLButtonElement и т.д.).
**Назначение:**
Класс Component<T> — это абстракция для всех компонентов представления. Он инкапсулирует базовые операции с DOM-элементом и предоставляет универсальные методы управления внешним видом и состоянием интерфейсных элементов.

**Свойства:**
- `_element	T (Generic)` -	Корневой DOM-элемент компонента, с которым работают все методы. Тип элемента задаётся дженериком (например, HTMLElement, HTMLDivElement, HTMLButtonElement и др.), что делает компонент универсальным.

**Методы:**
- `toggleClass(className: string): void` - Добавляет или убирает CSS-класс у элемента.
- `setText(text: string)` -	Устанавливает текстовое содержание элемента.
- `setDisabled(isDisabled: boolean): void` -	Включает или выключает элемент через атрибут disabled.
- `setHidden(): void` -	Скрывает элемент, добавляя атрибут hidden.
- `setVisible(): void` -	Делает элемент видимым, убирая атрибут hidden.
- `setImage(src: string, alt: string): void` -	Устанавливает изображение (src) и альтернативный текст (alt) для элементов типа <img>.
- `render(): T` -	Возвращает корневой DOM-элемент компонента.

### Класс `Page`
`constructor(options: {`
  counterSelector: string; — селектор счётчика корзины.
  catalogSelector: string; — селектор контейнера каталога.
  wrapperSelector: string; — селектор обёртки страницы.
  basketSelector: string; — селектор контейнера корзины.
`})` - 
**Назначение:** Управляет визуальной частью страницы: отвечает за отображение каталога товаров, обновление счетчика корзины, а также блокировку и разблокировку прокрутки страницы при открытии корзины или модальных окон.

**Свойства:**
- `_counter: HTMLElement` -  элемент счетчика корзины, отображающий количество товаров.
- `_catalog: HTMLElement` - контейнер каталога, в который добавляются карточки товаров.
- `_wrapper: HTMLElement` - обёртка всей страницы, используется для управления прокруткой.
- `_basket: HTMLElement` - контейнер для отображения содержимого корзины.

**Методы:**
- `locked(isLocked: boolean): void` - блокирует/разблокирует прокрутку страницы.
- `setCounter(count: number): void` - Обновляет значение счётчика корзины на иконке.Принимает количество товаров и отображает его.
- `clearCatalog(): void` - Очищает каталог товаров перед повторной отрисовкой (например, при фильтрации или обновлении данных).
- `toggleBasket(isOpen: boolean): void` - Открывает или закрывает корзину. Управляет классами активности корзины (basket--open).


### Класс `Catalog`
`constructor(container: HTMLElement, createCard: (data: IProductItem) => Card, onCardSelect?: (data: IProductItem) => void))` - Инициализация контейнера для карточек и функции создания карточек.
**Назначение:** 
инкапсулирует логику отображения карточек товаров, обеспечивает удобное обновление списка и управление элементами каталога на странице.

**Свойства:**
- `_container:HTMLElement` - DOM-элемент, в который рендерятся карточки товаров.
- `_items:IProductItem[]`	- Список данных товаров для отображения.
- `_createCard	(data: IProductItem) => Card` - функция, принимающая данные товара и возвращающая готовый компонент Card.
- `_onCardSelect?: (data: IProductItem) => void` — oбработчик выбора карточки.

**Методы:**
- `render(items: IProductItem[]): void` -	Очищает каталог и отрисовывает список карточек.
- `addItem(data: IProductItem): void`	- создает и добавляет одну карточку в контейнер.
- `clear(): void`	-	Полностью очищает контейнер карточек.
- `createCatalogCard(data: IProductItem): HTMLElement` - cоздаёт карточку товара на основе HTML-шаблона, заполняет заголовок, изображение, категорию и цену товара, применяет стили к категории товара, возвращает готовый DOM-элемент карточки.

### Класс `Card`
`constructor(data: IProductItem, handleAddToCart: (item: IProductItem) => void)` - Принимает данные товара и колбэк для обработки клика "Добавить в корзину".
**Назначение:** Отображение карточки товара. Формирует визуальное представление товара, заполняет данные (название, цена, изображение, категория, описание), а также обрабатывает действия пользователя (например, добавление в корзину).

**Свойства:**
- `_data: IProductItem` - Объект с данными о товаре (id, название, цена, изображение и т.д.).
- `_element	HTMLElement` -	Главный DOM-элемент карточки товара.
- `_handleAddToCart: (item: IProductItem) => void` — обработчик добавления товара в корзину.

**Методы:**
- `_getTemplate(): HTMLElement` - загружает HTML-шаблон карточки товара, клонирует шаблон и возвращает готовый DOM-элемент.
- `_fillData(): void` - заполняет карточку данными о товаре (название, изображение, описание, цена, категория),применяет стили для категории товара.
- `_getCategoryClass(category: string): string` - определяет CSS-класс для категории товара, сопоставляет название категории с соответствующим классом.
- `_setEventListeners(): void` - навешивает обработчики событий (например, клик по кнопке "Добавить в корзину").
- `getElement(): HTMLElement (опционально)` - Возвращает текущий _element — удобно, если метод render вызывался ранее.


### Класс `Basket`
`constructor(container: HTMLElement, totalElement: HTMLElement, createBasketItem: (data: IProductItem) => HTMLElement)` - 
Инициализация контейнера для товаров, элемента общей суммы и функции создания элементов корзины.
**Назначение:**
Управляет состоянием корзины: добавление и удаление товаров, подсчет количества, очистка корзины. Отвечает за отображение списка товаров в корзине.

**Свойства:**
- `_container: HTMLElement` — DOM-элемент контейнера для отображения содержимого корзины.
- `_total: HTMLElement` — элемент для отображения общей суммы товаров в корзине.
- `_items: IBasketItem[]` — список товаров, добавленных в корзину.
- `_createBasketItem: (data: IBasketItem, events: EventEmitter) => HTMLElement` — функция-фабрика для создания DOM-элемента товара в корзине.

**Методы:**
- `render(): void` — очищает контейнер и отрисовывает все товары из _items.
- `addItem(data: IProductItem): void` — добавляет товар в корзину и обновляет отображение.
- `removeItem(itemId: string): void` — удаляет товар из корзины по id и обновляет отображение.
- `clear(): void` — очищает корзину полностью.
- `getItems(): IBasketItem[]` — возвращает текущий список товаров в корзине.
- `updateTotal(): void` - Пересчитывает и отображает общую сумму всех товаров в корзине.
- `updateCheckoutButton(): void` - обновляет состояние кнопки "Оформить" в корзине, отключает кнопку, если корзина пуста, включает кнопку, если в корзине есть товары,добавляет или убирает класс .button_disabled для визуального отображения состояния.


### Класс `Modal`
`constructor(popupSelector: string)`
- `popupSelector: string` — CSS-селектор модального контейнера.
*(при инициализации внутри берутся _closeButton и _content по querySelector)*
**Назначение:**
Инкапсулирует логику отображения модального окна. Предоставляет функционал открытия, закрытия и обновления содержимого окна с обработкой событий взаимодействия.

**Свойства:**
- `_closeButton: HTMLElement` - Кнопка для закрытия модального окна. При клике вызывает метод закрытия окна.
- `_content: HTMLElement` - Элемент-контейнер для отображения динамического содержимого модального окна.
- `_events: EventEmitter` - управляет глобальными событиями модального окна, позволяет другим компонентам подписываться на события открытия и закрытия модального окна.
- `_popup: HTMLElement` - контролирует отображение модального окна и его взаимодействие с пользователем. Позволяет динамически изменять состояние окна и управлять его стилями.

Обрабатывает клики вне модального контента для автоматического закрытия окна.

**Методы:**
- `open(): void` - Открывает модальное окно, добавляя необходимые классы или стили для отображения элемента на странице.
- `close(): void` - Закрывает модальное окно, удаляя классы или стили, скрывающие окно, а также сбрасывает состояние окна.
- `render(data: IModalData): void` - Принимает данные для отображения в модальном окне, устанавливает их в содержимое и открывает окно. Автоматически вызывает метод open() после рендеринга.
- `setContent(element: HTMLElement)` - очищает текущий контент модального окна, добавляет переданный HTMLElement в контейнер _content, позволяет динамически менять содержимое модального окна без пересоздания его экземпляра.

### Класс `Success`
`constructor(totalElement: HTMLElement, closeButton: HTMLElement, messageElement: HTMLElement)` - Инициализация элементов для суммы, кнопки закрытия и текста сообщения.
**Назначение:**
Представляет компонент, который отображается при успешной оплате заказа. Используется для отображения сообщения о завершении действия, общего списания и возможности закрыть уведомление.

**Свойства:**
- `_close: HTMLElement` — элемент для закрытия сообщения об успешном завершении.
- `_total: HTMLElement` — отображает общую сумму списания (например, стоимость заказа).
- `_message: HTMLElement` — элемент, отображающий текст сообщения об успешной оплате.

**Методы:**
- `render(totalAmount: number, message: string): void` - Отображает успешное сообщение, устанавливает текстовое сообщение и сумму списания, а также добавляет обработчик клика на кнопку закрытия, который скрывает модальное окно.
- `show(): void` - Показывает компонент успешной оплаты и отображает сумму.
- `hide(): void` - Скрывает компонент после успешной оплаты или по запросу пользователя (клик по кнопке закрытия).
- `setCloseListener(handler: () => void): void` - Устанавливает обработчик события для кнопки закрытия, чтобы скрыть компонент по клику.


### Класс `Contacts`
`constructor(formElement: HTMLFormElement)`- Инициализация значений для номера телефона и электронной почты, переданных в параметры.
formElement: HTMLFormElement — DOM-форма для ввода электронной почты и телефона.
**Назначение:**
Представляет форму для ввода контактной информации, включая номер телефона и электронную почту.

**Свойства:**
- `_formElement: HTMLFormElement` — сама форма контактов.
- ` _inputPhone: HTMLInputElement` — устанавливает значение номера телефона, введённого пользователем.
- `_inputEmail: HTMLInputElement` — устанавливает значение электронной почты, введённой пользователем.
- `get email(): string / set email(value: string): void` — геттер и сеттер для управления значением email, автоматически вызывает валидацию формы при изменении.
- `get phone(): string / set phone(value: string): void` — геттер и сеттер для номера телефона, вызывают валидацию формы при каждом изменении значения.
- `_events: EventEmitter` - обеспечивает возможность динамического взаимодействия между формой контактов и другими частями приложения. Позволяет системе реагировать на изменения введённых данных и успешную отправку формы.

**Методы:**
- `render(): HTMLFormElement` - Возвращает готовый DOM-элемент формы (для встраивания или повторного отображения).
- `setEventListeners(): void` - Навешивает обработчики input на поля _inputPhone и _inputEmail, обновляя свойства this.phone и this.email.
- `validateForm(): void` - Выполняет валидацию введённых данных (например, проверяет корректность формата телефона и почты).


### Класс `Order`
`constructor(formElement: HTMLFormElement, buttons: HTMLElement[])`
- `formElement: HTMLFormElement` — форма оформления заказа (поле адреса);
- `buttons: HTMLElement[]` — кнопки выбора способа оплаты.
**Назначение:**
Управляет процессом оформления заказа: сбор данных из формы, отправка заказа на сервер, отображение статуса заказа.

**Свойства:**
- `_buttons: HTMLElement[]` — массив кнопок выбора способа оплаты. Каждая кнопка реагирует на событие 'click', устанавливая способ оплаты.
- `payment: string` — устанавливает выбранный способ оплаты и применяет соответствующий стиль к кнопке.
- `address: string` — устанавливает значение введённого адреса доставки.
- `_events: EventEmitter` - обеспечивает динамическое взаимодействие между формой заказа и другими частями приложения. Позволяет реагировать на пользовательские действия, такие как выбор способа оплаты и отправку формы.

**Методы:**
- `constructor(formElement: HTMLFormElement, buttons: HTMLElement[])` - Инициализация кнопок, значения выбранного способа оплаты и адреса доставки.
- `render(): HTMLFormElement` - Отображает форму с кнопками выбора способа оплаты и полем для ввода адреса.
- `setEventListeners(): void` - Вешает обработчики событий на кнопки выбора способа оплаты и поле ввода адреса.
- `validateForm(): void` — проверяет, что payment и address непустые и обновляет состояние кнопки отправки формы.
- `setPaymentMethod(method: string): void` — устанавливает `this.payment = method` и обновляет стиль кнопок.
- `handleSubmit(event: SubmitEvent): void` — отменяет стандартную отправку формы, вызывает `validateForm()`, а затем `submitOrder()` при успешной проверке.
- `submitOrder(): Promise<void>` — формирует данные заказа `{ payment, address }`, отправляет их на сервер и очищает корзину.


### 3. Утилиты (`utils/utils.ts`)  

- `pascalToKebab(value: string): string` — преобразует строку из PascalCase в kebab-case. 
- `isSelector(x: any): x is string` — проверяет, является ли аргумент строкой-селектором. 
- `isEmpty(value: any): boolean` — проверяет, является ли значение пустым (null, undefined, пустая строка или массив). 
- `ensureAllElements<T>(selectorElement, context?): T[]` — возвращает массив элементов по селектору, либо выбрасывает ошибку, если элементы не найдены. 
- `ensureElement<T>(selectorElement, context?): T` — возвращает один элемент по селектору, либо выбрасывает ошибку, если элемент не найден. 
- `cloneTemplate<T>(query): T` — клонирует содержимое элемента <template> и возвращает результат типизированным элементом. 
- `bem(block, element?, modifier?)` — генерирует имя класса по методологии БЭМ. 
- `getObjectProperties(obj, filter?)` — возвращает список имён свойств объекта, с возможностью фильтрации. 
- `setElementData<T>(el, data)` — устанавливает dataset-атрибуты. 
- `getElementData<T>(el, scheme)` — получает типизированные данные из dataset. 
- `isPlainObject(obj)` — проверяет, является ли объект простым (не экземпляром класса или массивом). 
- `isBoolean(v)` — проверяет, является ли значение boolean. 
- `createElement<T>(tagName, props?, children?)` — создает DOM-элемент. 


## Об архитектуре  
Проект построен по принципу событийного взаимодействия (паттерн "Наблюдатель"). 
Модели управляют данными и инициируют события при их изменении. 
Основной код слушает события, синхронизирует данные между моделями и компонентами отображения, обновляет интерфейс. 
Компоненты отвечают только за визуальное представление и не содержат бизнес-логики. 
Запросы к серверу инкапсулированы в классе Api. 